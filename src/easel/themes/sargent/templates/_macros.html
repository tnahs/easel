{% macro render_menu_items() %}

    {% for item in site.menu %}

        {% if item.is_link_page %}

            {% set current = "menu-item--current" if item.url == site.page_current.url else "" %}

            <a class="menu-item__link-page" id="{{ current }}" href="{{ item.url }}">{{ item.label }}</a>

        {% elif item.is_link_url %}

            <a class="menu-item__link-url" href="{{ item.url }}" target="_blank">{{ item.label }}</a>

        {% elif item.is_spacer %}

            <span class="menu-item__spacer--{{ item.size }}">{{ item.label if item.label is not none }}</span>

        {% endif %}

    {% endfor %}

{% endmacro %}


{% macro render_content(page, content) %}

    <div class="content__container">

        {% if content.is_image %}

            <img class="content-item__image"
                src="{{ url_for('site.static', filename=content.placeholder.path_relative_image) }}"
                data-src="{{ url_for('site.static', filename=content.path_relative) }}"
                data-placeholder-color='{{ content.placeholder.color | tojson }}'>

                {# NOTE: This last attribute 'data-placeholder-color' *must* be
                surrounded by single quotes. to properly render as JSON in the
                template. Its value is retrieved and parsed in Javascript. #}

        {% elif content.is_video %}

            <video class="content-item__video" controls>
                <source
                    src="{{ url_for('site.static', filename=content.path_relative) }}"
                    type="{{ content.mimetype }}">
            </video>

        {% elif content.is_audio %}

            <audio class="content-item__audio" controls preload="metadata">
                <source
                    src="{{ url_for('site.static', filename=content.path_relative) }}"
                    type="{{ content.mimetype }}">
                Your browser does not support the audio element.
            </audio>

        {% elif content.is_embedded %}

            <div class="content-item__embedded">{{ content.html | safe }}</div>

        {% elif content.is_text_block %}

            {% set align = content.align if content.align else "justify" %}

            <div class="content-item__text-block align--{{ align }} markdown">{{ content.body | safe }}</div>

        {% elif content.is_header %}

            {% set size = content.size if content.size else "medium" %}
            {% set align = content.align if content.align else "left" %}

            <div class="content-item__header--{{ size }} align--{{ align }}">{{ content.text }}</div>

        {% elif content.is_break %}

            {% set size = content.size if content.size else "medium" %}

            <div class="content-item__break--{{ size }}"></div>

        {% endif %}

        {% if page.show_captions %}

            <div class="content-item__caption">

                {{ render_caption(page, content) }}

            </div>

        {% endif %}

    </div>

{% endmacro %}


{% macro render_gallery_content(page, content) %}

    <div class="content__container">

        <img class="content-item__image"
            src="{{ url_for('site.static', filename=content.placeholder.path_relative_image) }}"
            data-src="{{ url_for('site.static', filename=content.path_relative) }}"
            data-placeholder-color='{{ content.placeholder.color | tojson }}'>

            {# NOTE: This last attribute 'data-placeholder-color' *must* be
            surrounded by single quotes. to properly render as JSON in the
            template. Its value is retrieved and parsed in Javascript. #}

        {# Captions are rendered in the Lightbox. #}

    </div>

{% endmacro %}


{% macro render_caption(content, align_default="left") %}

    {% if content.caption_title or content.caption_description %}

        {% set align = content.caption_align if content.caption_align else align_default %}

        <div class="caption align--{{ align }}">

            {% if content.caption_title %}

                <span class="caption__title markdown">{{ content.caption_title | safe }}</span>

            {% endif %}

            {% if content.caption_description %}

                <span class="caption__description markdown">{{ content.caption_description | safe }}</span>

            {% endif %}

        </div>

    {% endif %}

{% endmacro %}


{% macro render_css(name, value) %}

    {% if value is not none %}{{ name }}: {{ value }};{% endif %}

{% endmacro %}